version: 2

models:
  - name: int_investment_rounds_curated
    description: |
      Curated investment rounds from PM source system demonstrating multiple rounds per instrument.
      Business logic: One instrument can have multiple investment rounds (Series A, B, C, follow-ons).
      Examples in data: TechFlow (Series A + B), CloudSoft (Series B + C), BioTech (Series A + A-1).
    columns:
      - name: investment_round_id
        description: "Canonical investment round identifier generated as surrogate key from instrument_id + date"
        tests:
          - unique
          - not_null
      - name: instrument_id
        description: "Canonical instrument identifier - multiple rounds can share the same instrument_id"
        tests:
          - not_null
          - relationships:
              to: ref('int_instruments_unified')
              field: instrument_id
      - name: date
        description: "Investment round date - used with instrument_id to uniquely identify rounds"
        tests:
          - not_null
      - name: description
        description: "Investment round description (e.g., 'Follow-on investment to support international expansion')"
      - name: number_of_shares_acquired
        description: "Number of shares acquired in this specific round"
      - name: share_class_id
        description: "Share class identifier for this round (null if no xref mapping exists)"
      - name: acquired_stake
        description: "Percentage stake acquired in this specific round (not cumulative)"
      - name: created_at
        description: "Record creation timestamp"
      - name: updated_at
        description: "Last update timestamp"
